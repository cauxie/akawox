{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Akawo Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" />
</head>
<body>
<div class="min-h-screen bg-black text-white px-4 pt-6 pb-40 font-sans relative overflow-x-hidden">

  <main>
    <!-- Header -->
    <div class="relative mb-6">
      <div class="flex items-center space-x-2 p-2 border border-gray-300 rounded-full shadow-lg bg-zinc-900 w-fit">
        {% if user.profile.image %}
          <img src="{{ user.profile.image.url }}" class="w-8 h-8 rounded-full" />
        {% else %}
          <div class="w-8 h-8 bg-gray-700 text-white flex items-center justify-center rounded-full uppercase font-bold">
            {{ user.username|first }}
          </div>
        {% endif %}
        <p class="text-sm text-gray-400">Welcome Organizer.</p>
        <h1 class="text-lg font-bold text-white">{{ user.first_name }} {{ user.last_name }}</h1>
      </div>
      <!-- Light Mode Button -->
      <button class="absolute top-0 right-0 text-white text-xl p-2">
        <span class="material-symbols-outlined">light_mode</span>
      </button>
    </div>

    <!-- Group Stats & History -->
    <div class="flex items-center justify-between mb-4">
      <div class="text-2xl font-bold tracking-wider">
        <span class="text-xl md:text-2xl font-bold">Groups ({{ groups.count }})</span>
      </div>
      <a href="{% url 'transaction_history' %}" class="bg-blue-400 text-black px-4 py-2 rounded-full text-sm font-semibold">History</a>
    </div>

    <hr class="border-l border-zinc-900 w-70 mb-4"/>

    <!-- Navigation Cards -->
    <div class="grid grid-cols-3 gap-4">
      <!-- My Groups -->
      <a href="{% url 'group_manage' %}" class="bg-zinc-900 rounded-2xl p-4 flex flex-col items-start shadow">
        <div class="w-10 h-10 bg-zinc-800 rounded-full flex items-center justify-center mb-2">
          <span class="material-symbols-outlined text-blue-600">groups</span>
        </div>
        <div class="text-sm text-white">My Groups</div>
      </a>

      <!-- Wallet -->
      <a href="{% url 'organizer_list' %}" class="bg-zinc-900 rounded-2xl p-4 flex flex-col items-start shadow">
        <div class="w-10 h-10 bg-zinc-800 rounded-full flex items-center justify-center mb-2">
          <span class="material-symbols-outlined text-pink-500">wallet</span>
        </div>
        <div class="text-sm text-white">Wallet</div>
      </a>

      <!-- Create Group -->
      <button onclick="toggleModal()" class="bg-zinc-900 rounded-2xl p-4 flex flex-col items-start shadow">
        <div class="w-10 h-10 bg-zinc-800 rounded-full flex items-center justify-center mb-2">
          <span class="material-symbols-outlined text-orange-500">account_tree</span>
        </div>
        <div class="text-sm text-white">Create Group</div>
      </button>

      <!-- Contributions -->
      <a href="{% url 'organizer_contribution' %}" class="bg-zinc-900 rounded-2xl p-4 flex flex-col items-start shadow">
        <div class="w-10 h-10 bg-zinc-800 rounded-full flex items-center justify-center mb-2">
          <span class="material-symbols-outlined text-orange-500">send_money</span>
        </div>
        <div class="text-sm text-white">Contributions</div>
      </a>

      <!-- Withdrawals -->
      <a href="{% url 'organizer_withdrawal' %}" class="bg-zinc-900 rounded-2xl p-4 flex flex-col items-start shadow">
        <div class="w-10 h-10 bg-zinc-800 rounded-full flex items-center justify-center mb-2">
          <span class="material-symbols-outlined text-green-500">view_kanban</span>
        </div>
        <div class="text-sm text-white">Withdrawals</div>
      </a>

      <!-- Reports -->
      <a href="{% url 'organizer_reports' %}" class="bg-zinc-900 rounded-2xl p-4 flex flex-col items-start shadow">
        <div class="w-10 h-10 bg-zinc-800 rounded-full flex items-center justify-center mb-2">
          <span class="material-symbols-outlined text-blue-300">article</span>
        </div>
        <div class="text-sm text-white">Reports</div>
      </a>

      <!-- Gift User -->
      <a href="#" onclick="openModal(event)" class="bg-zinc-900 rounded-2xl p-4 flex flex-col items-start shadow">
        <div class="w-10 h-10 bg-zinc-800 rounded-full flex items-center justify-center mb-2">
          <span class="material-symbols-outlined text-green-900">featured_seasonal_and_gifts</span>
        </div>
        <div class="text-sm text-white">Gift User</div>
      </a>

      <!-- Settings -->
      <a href="{% url 'account_settings' %}" class="bg-zinc-900 rounded-2xl p-4 flex flex-col items-start shadow">
        <div class="w-10 h-10 bg-zinc-800 rounded-full flex items-center justify-center mb-2">
          <span class="material-symbols-outlined text-purple-800">settings</span>
        </div>
        <div class="text-sm text-white">Settings</div>
      </a>

      <!-- More -->
      <a href="#" class="bg-zinc-900 rounded-2xl p-4 flex flex-col items-start shadow">
        <div class="w-10 h-10 bg-zinc-800 rounded-full flex items-center justify-center mb-2">
          <span class="material-symbols-outlined text-purple-700">more_horiz</span>
        </div>
        <div class="text-sm text-white">More</div>
      </a>
    </div>

    <!-- Refer & Earn -->
    <div class="bg-zinc-900 text-white rounded-2xl p-3 flex items-center justify-between max-w-md mx-auto shadow-md mt-4">
      <div class="flex items-center space-x-4">
        <div class="w-10 h-10 bg-gradient-to-tr from-blue-500 to-yellow-400 rounded-full flex items-center justify-center">
          <img src="{% static 'images/bullhorn.png' %}" alt="Icon" class="w-6 h-6" />

        </div>
        <div>
          <h2 class="text-lg font-semibold">Refer and Earn</h2>
          <p class="text-sm text-gray-300">Invite Friends and earn.</p>
        </div>
      </div>
      <button class="bg-blue-600 text-white rounded-full px-5 py-2 text-sm font-medium hover:bg-blue-700">Go</button>
    </div>
  </main>
</div>

<!-- Footer Navbar (Static, Home Always Active) -->
<div class="fixed bottom-0 left-0 right-0 flex justify-around items-end py-3 text-gray-400 bg-black z-50">
  <a href="{% url 'organizer_dashboard' %}" class="flex flex-col items-center cursor-pointer">
    <div class="bg-blue-600 text-white -translate-y-4 p-3 rounded-full flex items-center justify-center w-12 h-12">
      <span class="material-symbols-outlined">home</span>
    </div>
    <span class="text-xs mt-1 text-white">Home</span>
  </a>
  <a href="{% url 'refer' %}" class="flex flex-col items-center cursor-pointer">
    <div class="text-gray-400 p-3 rounded-full flex items-center justify-center w-12 h-12">
      <span class="material-symbols-outlined">bolt</span>
    </div>
  </a>
  <a href="{% url 'support' %}" class="flex flex-col items-center cursor-pointer">
    <div class="text-gray-400 p-3 rounded-full flex items-center justify-center w-12 h-12">
      <span class="material-symbols-outlined">help</span>
    </div>
  </a>
  <a href="{% url 'me' %}" class="flex flex-col items-center cursor-pointer">
    <div class="text-gray-400 p-3 rounded-full flex items-center justify-center w-12 h-12">
      <span class="material-symbols-outlined">account_circle</span>
    </div>
  </a>
</div>

<!-- Gift Modal -->
<div id="giftModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
  <div class="bg-zinc-900 p-6 rounded-2xl shadow-lg text-center max-w-sm w-full">
    <h2 class="text-white text-lg font-bold mb-4">Not Available</h2>
    <p class="text-gray-400 mb-6">This feature is not available at the moment.</p>
    <button onclick="closeModal()" class="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-lg">Close</button>
  </div>
</div>

<!-- Create Group Modal -->
<div id="createGroupModal" class="hidden fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4">
  <div class="bg-black rounded-2xl shadow-lg w-full max-w-sm p-6 relative border border-gray-700">
    <h3 class="text-lg font-bold text-white mb-4 text-center">Create New Group</h3>
    <form method="POST" enctype="multipart/form-data" class="space-y-4">
      {% csrf_token %}
      <div>
        <label class="block text-sm font-semibold text-white mb-1">Group Name</label>
        <input type="text" name="name" class="w-full bg-gray-800 text-white border border-gray-600 rounded-lg px-3 py-2" required>
      </div>
      <div>
        <label class="block text-sm font-semibold text-white mb-1">Group Photo</label>
        <input type="file" name="photo" class="w-full text-sm text-gray-300 file:bg-gray-700 file:text-white file:border-none file:px-3 file:py-2 file:rounded-lg">
      </div>
      <div>
        <label class="block text-sm font-semibold text-white mb-1">Contribution Type</label>
        <select name="contribution_type" class="w-full bg-gray-800 text-white border border-gray-600 rounded-lg px-3 py-2">
          <option value="weekly">Weekly</option>
          <option value="monthly">Monthly</option>
        </select>
      </div>
      <div>
        <label class="block text-sm font-semibold text-white mb-1">Contribution Amount (â‚¦)</label>
        <input type="number" name="contribution_amount" step="0.01" min="0" class="w-full bg-gray-800 text-white border border-gray-600 rounded-lg px-3 py-2" required>
      </div>
      <div>
        <label class="block text-sm font-semibold text-white mb-1">Withdrawal Schedule</label>
        <input type="text" name="withdrawal_schedule" placeholder="e.g., 25th of every month" class="w-full bg-gray-800 text-white border border-gray-600 rounded-lg px-3 py-2" required>
      </div>
      <div class="flex justify-end space-x-2 pt-2">
        <button type="button" onclick="toggleModal()" class="bg-gray-700 text-white px-4 py-2 rounded-lg">Cancel</button>
        <button type="submit" class="bg-purple-600 text-white px-4 py-2 rounded-lg">Save</button>
      </div>
    </form>
  </div>
</div>

<!-- Scripts -->
<script>
function toggleModal() {
  const modal = document.getElementById('createGroupModal');
  modal.classList.toggle('hidden');
  modal.classList.toggle('flex');
}
function openModal(e) {
  e.preventDefault();
  document.getElementById('giftModal').classList.remove('hidden');
}
function closeModal() {
  document.getElementById('giftModal').classList.add('hidden');
}
</script>
</body>
</html>
